{
  "hash": "b5bd8506e8d3b79d29e4c2b630bcef1f",
  "result": {
    "markdown": "---\ntitle: \"Base dos Dados\"\nauthor: \"Jorge Luiz Mendes\"\ndate: \"2023-12-17\"\ncategories: [\"Dados\"]\nimage: \"logo.png\"\ndescription: \"Um breve tutorial de como utilizar o pacote base dos dados.\"\n---\n\n\n## Introdução \n\nA organização [Base dos Dados](https://basedosdados.org) fornece uma fonte riquissima dados públicos podendo ser acessados via python, R, SQL e Stata. Eles fornecessem tabelas tratadas de diferentes assuntos de forma gratuita e paga.\n\n## Mãos a obra\n\n### Google Cloud\n\nTenha uma conta Google logada, acesse seu workspace do Google Cloud e crie um projeto.\n\n![](img/Capturar_BigQ.PNG){fig-align=\"center\"}\n\n::: {.callout-caution collapse=\"true\"}\n## Cuidado com a quantidade de projetos.\n\nComo qualquer serviço da Google existem planos gratuitos e pagos. Atente-se aos limites de números projetos e o tamanho da requisição que você pode fazer mensalmente.\n:::\n\n### RStudio\n\nNo R instale e carregue a biblioteca.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#install.packages(\"basedosdados\")\nlibrary(\"basedosdados\")\n```\n:::\n\n\nForneça o id do seu projeto.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbasedosdados::set_billing_id(\"Id do Projeto\")\n```\n:::\n\n\n### Selecionando os dados\n\nExistem diferentes formas de fazer a requisição dos dados e esta disponível na [documentação](https://basedosdados.github.io/mais/access_data_packages/#primeiros-passos). A forma favorita é criando uma *query*, pois posso selecionar uma pequena amostra dos dados. Primeiro vá ao [datalake](https://console.cloud.google.com/bigquery?project=psyched-myth-408218&ws=!1m0) da base dos dados e copie o ID da tabela de interesse.\n\n![](img/Capturar_tabela.PNG){fig-align=\"center\"}\n\nA query pode ser construida dessa forma (como se fosse uma requisição de dados no SQL).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nquery <- \"SELECT *\nFROM basedosdados.br_tse_eleicoes.resultados_candidato_municipio\nWHERE ano = 2022\nAND cargo = \\'presidente\\'\nAND sigla_uf = \\'SP\\'\" # Cuidado com as strings\n# se quiser poder por \"limit 10\" no final para trazer uma pequena amostra \n```\n:::\n\n\n::: {.callout-note collapse=\"true\"}\n## Para quem não tem muita afinidade com SQL\n\nSELECT \\* -\\> Selecionar todas as colunas da tabela.\n\nFROM -\\> Especificar qual a tabela\n\nWHERE -\\> Filtros\n\nAND -\\> Concatenar todos os filtros\n:::\n\nAgora você pode baixar os dados definindo um diretório e fomato.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbasedosdados::download(query = query,path = \"Diretório\\dados.csv\")\n```\n:::\n\n\nRealize a autenticação\n\n![](img/Capturar_auth.PNG){fig-align=\"center\"}\n\n::: {.callout-tip collapse=\"true\"}\n## Permissões\n\nCertifiquisse de fornecer todas permissões\n:::\n\nAgora você tem os dados disponíveis no seu computador para realizar as análises. Reforço o cuidado com o volume de dados para evitar incovenientes de ter que trocar o email do seu projeto ou ter que esperar sua cota renovar.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}