{
  "hash": "b83895d0a830fc48ae5b8fb3300a4b72",
  "result": {
    "markdown": "---\ntitle: \"Poder de Compra e Big Mac\"\nauthor: \"Jorge Luiz Mendes\"\neditor: visual\ndate: \"2023-02-27\"\nimage: \"Big_Mac.png\"\ndescription: \"O big mac é um dos pratos mais famosos do mcdonalds e virou uma ferramenta de estudos econômicos\"\ncategories: [Economics, ggplot,dplyr]\nbibliography: references.bib\n---\n\n\n## História\n\nA revista britânica ***The Economics*** em 1986 criou o índice Big Mac (ou Big Mac Index). Seu objetivo era comparar o poder de compra de cada país utilizando o preço de um big mac .\n\n[![](Big_Mac.png){fig-align=\"center\"}](https://www.mcdonalds.com.br/cardapio/mc-oferta/big-mac)\n\nO índice pode ser calculado pela seguinte fórmula:\n\n$$\n Índice\\,Big\\,Mac = \\frac{Preço\\, Big\\, Mac\\, no\\, país}{\nPreço\\, Big\\, Mac\\, no\\, EUA*taxa\\, de\\, câmbio }\\, -1\n$$\n\nUm valor positivo significa que a moeda naquele momento está valorizada frente ao dólar americano, já um valor negativo indica que a moeda está subvalorizada. Os Estados Unidos da América recebe o valor de zero para seu índice, pois é a base de estudo.\n\n::: {.callout-note collapse=\"true\"}\n## Curiosidade!!!\n\nNesse post a moeda estudada foi o Dólar Americano, entretanto já existe dados comparando as outras moedas como o Euro, Libra Esterlina, yuan chinês, e entre outras moedas.\n:::\n\nEsse índice permite também calcular a razão de troca ou paridade do poder de compra:\n\n$$\n Razão\\,de\\,troca = \\frac{Preço\\,Big\\,Mac\\,no\\,país}{Preço\\,em\\, dolar}\n$$\n\nGostaria de mostrar uma biblioteca que conheci recentemente ,[@ggthemes], ela da uma embelezada no seus gráficos.\n\n## Bibliotecas\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr) # tratamento de dados\nlibrary(knitr) # formatação de tabela\nlibrary(ggplot2) # gráficos\nlibrary(ggthemes) # temas de gráficos\nlibrary(lubridate) # tratamento de datas\nlibrary(glue) # colar textos\n```\n:::\n\n\n## Carregando os dados\n\nOs dados podem ser encontrados no [kaggle](https://www.kaggle.com/datasets/paultimothymooney/the-economists-big-mac-index).\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- read.csv(\"big_mac.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1,631\nColumns: 19\n$ date          <chr> \"2000-04-01\", \"2000-04-01\", \"2000-04-01\", \"2000-04-01\", …\n$ iso_a3        <chr> \"ARG\", \"AUS\", \"BRA\", \"CAN\", \"CHE\", \"CHL\", \"CHN\", \"CZE\", …\n$ currency_code <chr> \"ARS\", \"AUD\", \"BRL\", \"CAD\", \"CHF\", \"CLP\", \"CNY\", \"CZK\", …\n$ name          <chr> \"Argentina\", \"Australia\", \"Brazil\", \"Canada\", \"Switzerla…\n$ local_price   <dbl> 2.50, 2.59, 2.95, 2.85, 5.90, 1260.00, 9.90, 54.37, 24.7…\n$ dollar_ex     <dbl> 1.0000000, 1.6800000, 1.7900000, 1.4700000, 1.7000000, 5…\n$ dollar_price  <dbl> 2.500000, 1.541667, 1.648045, 1.938776, 3.470588, 2.4513…\n$ USD_raw       <dbl> 0.11607, -0.31176, -0.26427, -0.13448, 0.54937, 0.09436,…\n$ EUR_raw       <dbl> 0.05007, -0.35246, -0.30778, -0.18566, 0.45774, 0.02964,…\n$ GBP_raw       <dbl> -0.16722, -0.48645, -0.45102, -0.35417, 0.15609, -0.1834…\n$ JPY_raw       <dbl> -0.09864, -0.44416, -0.40581, -0.30099, 0.25130, -0.1161…\n$ CNY_raw       <dbl> 1.09091, 0.28939, 0.37836, 0.62152, 1.90267, 1.05023, 0.…\n$ GDP_bigmac    <dbl> 7803.329, 29144.877, 4822.739, 26087.329, 23872.716, 464…\n$ adj_price     <dbl> 1.922652, 2.301550, 1.869734, 2.247266, 2.207948, 1.8665…\n$ USD_adjusted  <dbl> 0.39117, -0.28335, -0.05696, -0.07698, 0.68172, 0.40514,…\n$ EUR_adjusted  <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ GBP_adjusted  <dbl> -0.06626, -0.51898, -0.36704, -0.38047, 0.12876, -0.0568…\n$ JPY_adjusted  <dbl> 0.10096, -0.43285, -0.25369, -0.26953, 0.33090, 0.11201,…\n$ CNY_adjusted  <dbl> 0.97153, 0.01563, 0.33645, 0.30809, 1.38330, 0.99133, 0.…\n```\n:::\n:::\n\n\n## No Mundo\n\nAtualmente que países possuim um índice positivo, ou seja, que possuim uma moeda valorizada em relação ao dólar americano?\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf |> filter(USD_raw > 0, date %in% max(date)) |>\n  ggplot(aes(x =reorder(name,USD_raw),y = USD_raw)) + \n  geom_col(fill = \"#236fa8\") +\n  labs(title = \"Países com moeda valorizada\",\n       subtitle = \"índices positivos em relação ao dólar em 01/07/2022\",\n       x = \"\",\n       y = \"índice Big Mac\",\n       caption = \"Mendes, Jorge L.,2023\") +\n  theme(\n    plot.title = element_text(face = \"bold\",size = 14),\n    axis.text.x = element_text(angle = 45)\n    \n  )\n```\n\n::: {.cell-output-display}\n![](Big-Mac_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nQuais países possuem o menor índice?\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf |> filter( date %in% max(date)) |>\n  arrange(desc(-USD_raw)) |> head() |> \n  ggplot(aes(x =reorder(name,USD_raw),y = USD_raw)) + \n  geom_col(fill = \"#db6d1f\") +\n  labs(title = \"Países com moeda subvalorizada\",\n       subtitle = \"índices positivos em relação ao dólar em 01/07/2022\",\n       x = \"\",\n       y = \"índice Big Mac\",\n       caption = \"Mendes, Jorge L.,2023\") +\n  theme(\n    plot.title = element_text(face = \"bold\",\n                              size = 14),\n    axis.text.x = element_text(angle = 45)\n    \n  )+\n  theme_solarized(base_size = 15, light = FALSE)\n```\n\n::: {.cell-output-display}\n![](Big-Mac_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n## Situação do Brasil.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nBr <- df |>  filter(name == \"Brazil\")\n#últimas 5 linhas\nBr|> \n  tail() |>  \n  select(1,4:8) |> \n  knitr::kable(col.names = \n                 c(\"Data\",\"País\",\n                   \"Preço Local\",\"Razão de Troca\",\n                   \"Preço Dolar\",\"Índice(dólar)\"),\"pipe\")\n```\n\n::: {.cell-output-display}\n|   |Data       |País   | Preço Local| Razão de Troca| Preço Dolar| Índice(dólar)|\n|:--|:----------|:------|-----------:|--------------:|-----------:|-------------:|\n|32 |2020-01-14 |Brazil |        19.9|        4.14190|    4.804558|      -0.00320|\n|33 |2020-07-01 |Brazil |        20.9|        5.34045|    3.913528|      -0.18806|\n|34 |2021-01-01 |Brazil |        21.9|        5.50460|    3.978491|      -0.18640|\n|35 |2021-07-01 |Brazil |        22.9|        5.24865|    4.363027|      -0.11500|\n|36 |2022-01-01 |Brazil |        22.9|        5.31000|    4.312618|      -0.14432|\n|37 |2022-07-01 |Brazil |        22.9|        5.39175|    4.247230|      -0.17530|\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#convertendo a coluna para data\nBr$date <- lubridate::as_date(Br$date)\n```\n:::\n\n\nPodemos analisar a evolução temporal do preço.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nGrafico_base <- Br |> ggplot() +\n  geom_line(aes(x=date,y =local_price),\n            linewidth = 1.2,\n            color =\"#d10404\" ) +\n  \n  geom_line(aes(x=date,y = mean(local_price)),\n          linetype =2,\n          color ='#5c5a5a') +\n  geom_point(aes(x=max(date),y = max(local_price)),\n             color ='#d10404',\n             size = 3) \n\nMax_price <- Br |>  filter(date %in% max(date)) |> \n  mutate(label = glue::glue(\"R$ {round(local_price,2)}\"))\n\n\nGrafico_base +\n  \n  labs(y = 'Real',\n       x ='Ano',\n       title = \"Preço do Big Mac no Brasil\",\n       subtitle = \"2000-2022\",\n       caption = \"Mendes, Jorge L.,2023 \") +\n  \n  annotate('text',\n           x=min(Br$date),\n           y =13.2,\n           label = \"Média\",\n          colour = \"#5c5a5a\",\n          size = 3,\n          fontface = 'bold') +\n  \n  ggrepel::geom_text_repel(\n    data = Max_price,\n    aes(x = date,y = local_price,label = label),\n    size = 5,\n    color = \"#d10404\",\n    nudge_y = -5,\n    nudge_x = 0,\n    min.segment.length = 0) +\n  \n  \n  theme(\n    panel.grid.minor = element_blank(),\n    panel.grid.major = element_blank(),\n    plot.title = element_text(face = \"bold\",size = 14)) +\n  theme_economist()\n```\n\n::: {.cell-output-display}\n![](Big-Mac_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nPodemos analizar o comportamento da razão de troca ao longo tempo.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nBr |> \n  ggplot(aes(x = date,y =dollar_ex)) + \n  geom_line(color = \"#218572\", linetype = 2, linewidth = 0.8) +\n  labs(title =\"Razão de troca\",\n       subtitle = \"Real Brasileiro/Dólar Americano 2000-2022\",\n       caption = \"Mendes, Jorge L,2023\",\n       x = \"Data\",\n       y = \"R$/$\") +\n  theme(\n    plot.title = element_text(face = \"bold\",size =14) \n  ) +\n  theme_economist_white()\n```\n\n::: {.cell-output-display}\n![](Big-Mac_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n## Ver também\n\n-   [Curso R](https://blog.curso-r.com)\n\n-   [Dicionário Financeiro](https://www.dicionariofinanceiro.com/big-mac-index/)\n\n-   [Temas](https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/)\n\n-   [GGplot](https://ggplot2-book.org)\n",
    "supporting": [
      "Big-Mac_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}